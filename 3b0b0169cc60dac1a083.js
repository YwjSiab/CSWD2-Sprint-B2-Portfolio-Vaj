import{displayProjects}from"./project.js";import{addProjectForm}from"./formhandler.js";import{generateCSRFToken}from"./security.js";document.addEventListener("DOMContentLoaded",async()=>{try{let o;console.log("üöÄ Portfolio Loaded Successfully"),generateCSRFToken(),addProjectForm(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(o=>{console.log(`üìç Location: ${o.coords.latitude}, ${o.coords.longitude}`)},o=>{console.warn("‚ö†Ô∏è Geolocation error:",o.message)}),"Notification"in window&&Notification.requestPermission().then(o=>{"granted"===o&&new Notification("‚úÖ Portfolio Ready",{body:"You can now use this app offline!",icon:"/icon-192.png"})}),document.querySelectorAll(".project-card").forEach(o=>{o.addEventListener("touchstart",()=>{o.classList.add("touched"),navigator.vibrate&&navigator.vibrate(50)})}),"serviceWorker"in navigator&&("production"!==process.env.NODE_ENV&&navigator.serviceWorker.getRegistrations().then(o=>o.forEach(o=>o.unregister())),navigator.serviceWorker.register("/serviceworker.js").then(()=>console.log("‚úÖ Service Worker registered")).catch(o=>console.error("‚ùå SW registration failed:",o))),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),o=e;const r=document.querySelector("#installBtn");r&&(r.style.display="block",r.addEventListener("click",()=>{o.prompt()}))}),window.allProjects&&window.allProjects.length>0&&displayProjects(window.allProjects),console.log("‚ú® App initialization complete.")}catch(o){console.error("‚ùå Error during page initialization:",o)}});